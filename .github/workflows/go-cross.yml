name: Go Matrix

on:
    push:
        branches:
            - main
    pull_request:

jobs:
    cross:
        name: Go Build
        runs-on: ${{ matrix.os }}
        env:
            CGO_ENABLED: 0
        
        strategy:
            matrix:
                go-version: [ stable, oldstable ]
                os: [ ubuntu-latest, macos-latest, windows-latest ]

        steps:
            - uses: actions/checkout@v6
            - uses: actions/setup-go@v6
              with:
                go-version: '${{ matrix.go-version }}'
            - name: Build
              run: go build -v -ldflags '-s -w' -trimpath
